(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c0c26"],{"42c5":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"markdown-body"},[n("h2",[t._v("fetch 接口请求")]),n("h3",[t._v("基础用法")]),n("h4",[t._v("1、定义默认配置")]),n("pre",[n("code",[t._v("Vue.prototype.$fetchConfig({\n  headers: {\n    'Accept': 'application/json, text/plain, */*'\n  },\n  baseUrl: 'https://www.demo.com',\n});\n")])]),n("h4",[t._v("2、定义接口")]),n("pre",[n("code",[t._v("Vue.prototype.$fetchDefine({\n  getLogo: {\n    url: 'logo.png',\n    method: 'get',\n    type: 'blob'\n  },\n  userLogin: {\n    url: 'user/login',\n    method: 'post'\n  }\n}, 'my_api') // namespace\n")])]),n("h4",[t._v("3、发起一个请求")]),n("pre",[n("code",[t._v("Vue.prototype.$fetch.my_api.getLogo({\n  _: Date.now()\n}).then(data => {\n  console.log(data) // Blob data\n})\n// get https://www.demo.com/logo.png?_=1597907390637\n")])]),n("h4",[t._v("4、指定post请求")]),n("pre",[n("code",[t._v("Vue.prototype.$fetch.my_api.getLogo.post().then(data => {\n  console.log(data)\n})\n")])]),n("h4",[t._v("5、自定义header")]),n("pre",[n("code",[t._v("Vue.prototype.$fetch.my_api.getLogo.header({\n  token: 'my-token'\n}).get().then(data => {\n  console.log(data)\n})\n")])]),n("h4",[t._v("6、自定义配置")]),n("pre",[n("code",[t._v("Vue.prototype.$fetch.my_api.getLogo({\n  _: Date.now()\n}, {\n  baseUrl: 'https://www.test.com',\n  url: 'my_pic.jpg',\n  method: 'post',\n  headers: {\n    'Cookie': 'my-cookie'\n  }    \n}).then(data => {\n  console.log(data) // Blob data\n})\n// get https://www.test.com/my_pic.jpg?_=1597907390637\n")])]),n("h4",[t._v("7、url拼接")]),n("pre",[n("code",[t._v("Vue.prototype.$fetch.my_api.userLogin.url('jerry', '13565498754')({\n  data: MyFormData\n}).then(data => {\n  console.log(data)\n})\n// post https://www.demo.com/user/login/jerry/13565498754\n")])]),n("h4",[t._v("8、添加一个全局结果处理函数")]),n("pre",[n("code",[t._v("Vue.prototype.$fetchMiddleware(function (res, options) {\n  res.then(data => {\n    if (!data) {\n      console.log('Your parameters may be incorrect')\n    }\n  }).catch(e => {\n    console.error('network error')\n  })\n})\n")])]),n("h3",[t._v("在组件中使用")]),n("pre",[n("code",{staticClass:"language-html"},[n("span",{staticClass:"hljs-tag"},[t._v("<"),n("span",{staticClass:"hljs-name"},[t._v("script")]),t._v(">")]),n("span",{staticClass:"javascript"},[t._v("\n  "),n("span",{staticClass:"hljs-keyword"},[t._v("export")]),t._v(" "),n("span",{staticClass:"hljs-keyword"},[t._v("default")]),t._v(" {\n    "),n("span",{staticClass:"hljs-attr"},[t._v("methods")]),t._v(": {\n      getLogo () {\n        "),n("span",{staticClass:"hljs-keyword"},[t._v("this")]),t._v(".$fetch.my_api.getLogo({\n          "),n("span",{staticClass:"hljs-attr"},[t._v("_")]),t._v(": "),n("span",{staticClass:"hljs-built_in"},[t._v("Date")]),t._v(".now()\n        }).then("),n("span",{staticClass:"hljs-function"},[n("span",{staticClass:"hljs-params"},[t._v("data")]),t._v(" =>")]),t._v(" {\n          "),n("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (data && data.size > "),n("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(") {\n            "),n("span",{staticClass:"hljs-keyword"},[t._v("this")]),t._v(".src = URL.createObjectURL(data)\n          }\n        })\n      }           \n    }\n  }\n")]),n("span",{staticClass:"hljs-tag"},[t._v("</"),n("span",{staticClass:"hljs-name"},[t._v("script")]),t._v(">")]),t._v("\n")])]),n("h3",[t._v("Methods")]),n("table",[n("thead",[n("tr",[n("th",[t._v("方法名")]),n("th",[t._v("说明")]),n("th",[t._v("参数")]),n("th",[t._v("参数描述")]),n("th",[t._v("返回值")])])]),n("tbody",[n("tr",[n("td",[t._v("$fetch")]),n("td",[t._v("接口api对象，根据 $fetchDefine 定义 API 路径和名称")]),n("td",[t._v("<data>[, options]")]),n("td",[t._v("data：请求的数据")]),n("td",[t._v("fetchHandler")])]),n("tr",[n("td",[t._v("$fetchConfig")]),n("td",[t._v("设置默认请求配置")]),n("td",[t._v("<options>")]),n("td",[t._v("—")]),n("td",[t._v("—")])]),n("tr",[n("td",[t._v("$fetchDefine")]),n("td",[t._v("定义API")]),n("td",[t._v("<APIMap>[, namespace]")]),n("td",[t._v("APIMap：定义API名称和配置，格式为 {name: <options>}，namespace：接口命名空间")]),n("td",[t._v("—")])]),n("tr",[n("td",[t._v("$fetchMiddleware")]),n("td",[t._v("添加请求结果拦截函数")]),n("td",[t._v("<function>")]),n("td",[t._v("—")]),n("td",[t._v("Promise")])])])]),n("h3",[t._v("options")]),n("table",[n("thead",[n("tr",[n("th",[t._v("参数")]),n("th",[t._v("说明")]),n("th",[t._v("类型")]),n("th",[t._v("可选值")]),n("th",[t._v("默认值")])])]),n("tbody",[n("tr",[n("td",[t._v("url")]),n("td",[t._v("请求URL地址")]),n("td",[t._v("String")]),n("td",[t._v("—")]),n("td",[t._v("—")])]),n("tr",[n("td",[t._v("baseUrl")]),n("td",[t._v("请求URL域名")]),n("td",[t._v("String")]),n("td",[t._v("—")]),n("td",[t._v("—")])]),n("tr",[n("td",[t._v("method")]),n("td",[t._v("请求使用的方法，如 GET、POST")]),n("td",[t._v("String")]),n("td",[t._v("—")]),n("td",[t._v("POST")])]),n("tr",[n("td",[t._v("data")]),n("td",[t._v("请求的数据")]),n("td",[t._v("Object")]),n("td",[t._v("Object / Blob / BufferSource / FormData / URLSearchParams / USVString")]),n("td",[t._v("—")])]),n("tr",[n("td",[t._v("headers")]),n("td",[t._v("请求的头信息")]),n("td",[t._v("Object")]),n("td",[t._v("—")]),n("td",[t._v("—")])]),n("tr",[n("td",[t._v("type")]),n("td",[t._v("请求的数据类型")]),n("td",[t._v("String")]),n("td",[t._v("json / blob / arrayBuffer / formData / text")]),n("td",[t._v("json")])]),n("tr",[n("td",[t._v("mode")]),n("td",[t._v("请求的模式")]),n("td",[t._v("String")]),n("td",[t._v("cors / no-cors / same-origin")]),n("td",[t._v("—")])]),n("tr",[n("td",[t._v("credentials")]),n("td",[t._v("请求的 credentials 。为了在当前域名内自动发送 cookie ， 必须提供这个选项")]),n("td",[t._v("String")]),n("td",[t._v("omit / same-origin / include")]),n("td",[t._v("—")])]),n("tr",[n("td",[t._v("cache")]),n("td",[t._v("请求的 cache 模式")]),n("td",[t._v("String")]),n("td",[t._v("default / no-store / reload / no-cache / force-cache / only-if-cached")]),n("td",[t._v("no-cache")])]),n("tr",[n("td",[t._v("signal")]),n("td",[t._v("AbortSignal 接口表示一个信号对象（ signal object ），它允许您通过 AbortController 对象与DOM请求（如Fetch）进行通信并在需要时将其中止。")]),n("td",[t._v("AbortController")]),n("td",[t._v("—")]),n("td",[t._v("—")])]),n("tr",[n("td",[t._v("redirect")]),n("td",[t._v("根据请求地址转成get请求，直接重定向URL")]),n("td",[t._v("Boolean")]),n("td",[t._v("—")]),n("td",[t._v("false")])]),n("tr",[n("td",[t._v("onDownload")]),n("td",[t._v("onDownload 回调方法")]),n("td",[t._v("Function")]),n("td",[t._v("—")]),n("td",[t._v("—")])])])]),n("h3",[t._v("fetchHandler")]),n("table",[n("thead",[n("tr",[n("th",[t._v("方法")]),n("th",[t._v("说明")]),n("th",[t._v("参数")]),n("th",[t._v("返回值")])])]),n("tbody",[n("tr",[n("td",[t._v("url")]),n("td",[t._v("url拼接")]),n("td",[t._v("<string>[, string]...")]),n("td",[t._v("fetchHandler")])]),n("tr",[n("td",[t._v("headers")]),n("td",[t._v("自定义请求头，会跟默认头信息合并")]),n("td",[t._v("<object>")]),n("td",[t._v("fetchHandler")])]),n("tr",[n("td",[t._v("get")]),n("td",[t._v("强制发起get请求（忽略接口定义和默认设置）")]),n("td",[t._v("<data>[, options]")]),n("td",[t._v("Promise对象")])]),n("tr",[n("td",[t._v("post")]),n("td",[t._v("强制发起post请求（忽略接口定义和默认设置）")]),n("td",[t._v("<data>[, options]")]),n("td",[t._v("Promise对象")])])])])])}],d=n("2877"),_={},s=Object(d["a"])(_,a,o,!1,null,null,null);e["default"]=s.exports}}]);