(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c0c26"],{"42c5":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"markdown-body"},[a("h2",[t._v("fetch 接口请求")]),a("h3",[t._v("基础用法")]),a("h4",[t._v("1、定义默认配置")]),a("pre",[a("code",[t._v("Vue.prototype.$fetchConfig({\n  baseUrl: 'https://www.demo.com'\n});\n")])]),a("h4",[t._v("2、定义接口")]),a("pre",[a("code",[t._v("Vue.prototype.$fetchDefine({\n  getLogo: {\n    url: 'logo.png',\n    method: 'get',\n    type: 'blob'\n  },\n  userLogin: {\n    url: 'user/login',\n    method: 'post'\n  }\n}, 'my_api') // namespace\n")])]),a("h4",[t._v("3、发起一个请求")]),a("pre",[a("code",[t._v("Vue.prototype.$fetch.my_api.getLogo({\n  _: Date.now()\n}).then(data => {\n  console.log(data) // Blob data\n})\n// get https://www.demo.com/logo.png?_=1597907390637\n")])]),a("h4",[t._v("4、指定post请求")]),a("pre",[a("code",[t._v("Vue.prototype.$fetch.my_api.getLogo.post().then(data => {\n  console.log(data)\n})\n")])]),a("h4",[t._v("5、自定义header")]),a("pre",[a("code",[t._v("Vue.prototype.$fetch.my_api.getLogo.header({\n  token: 'my-token'\n}).get().then(data => {\n  console.log(data)\n})\n")])]),a("h4",[t._v("6、自定义配置")]),a("pre",[a("code",[t._v("Vue.prototype.$fetch.my_api.getLogo({\n  _: Date.now()\n}, {\n  baseUrl: 'https://www.test.com',\n  url: 'my_pic.jpg',\n  method: 'post',\n  headers: {\n    'Cookie': 'my-cookie'\n  }    \n}).then(data => {\n  console.log(data) // Blob data\n})\n// get https://www.test.com/my_pic.jpg?_=1597907390637\n")])]),a("h4",[t._v("7、url拼接")]),a("pre",[a("code",[t._v("Vue.prototype.$fetch.my_api.userLogin.url('jerry', '13565498754')({\n  data: MyFormData\n}).then(data => {\n  console.log(data)\n})\n// post https://www.demo.com/user/login/jerry/13565498754\n")])]),a("h4",[t._v("8、添加一个全局结果处理函数")]),a("pre",[a("code",[t._v("Vue.prototype.$fetchMiddleware(function (res, options) {\n  res.then(data => {\n    if (!data) {\n      console.log('Your parameters may be incorrect')\n    }\n  }).catch(e => {\n    console.error('network error')\n  })\n})\n")])]),a("h3",[t._v("在组件中使用")]),a("pre",[a("code",{staticClass:"language-html"},[a("span",{staticClass:"hljs-tag"},[t._v("<"),a("span",{staticClass:"hljs-name"},[t._v("script")]),t._v(">")]),a("span",{staticClass:"javascript"},[t._v("\n  "),a("span",{staticClass:"hljs-keyword"},[t._v("export")]),t._v(" "),a("span",{staticClass:"hljs-keyword"},[t._v("default")]),t._v(" {\n    "),a("span",{staticClass:"hljs-attr"},[t._v("methods")]),t._v(": {\n      getLogo () {\n        "),a("span",{staticClass:"hljs-keyword"},[t._v("this")]),t._v(".$fetch.my_api.getLogo({\n          "),a("span",{staticClass:"hljs-attr"},[t._v("_")]),t._v(": "),a("span",{staticClass:"hljs-built_in"},[t._v("Date")]),t._v(".now()\n        }).then("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[t._v("data")]),t._v(" =>")]),t._v(" {\n          "),a("span",{staticClass:"hljs-keyword"},[t._v("if")]),t._v(" (data && data.size > "),a("span",{staticClass:"hljs-number"},[t._v("0")]),t._v(") {\n            "),a("span",{staticClass:"hljs-keyword"},[t._v("this")]),t._v(".src = URL.createObjectURL(data)\n          }\n        })\n      }           \n    }\n  }\n")]),a("span",{staticClass:"hljs-tag"},[t._v("</"),a("span",{staticClass:"hljs-name"},[t._v("script")]),t._v(">")]),t._v("\n")])]),a("h3",[t._v("Methods")]),a("table",[a("thead",[a("tr",[a("th",[t._v("方法名")]),a("th",[t._v("说明")]),a("th",[t._v("参数")]),a("th",[t._v("参数描述")]),a("th",[t._v("返回值")])])]),a("tbody",[a("tr",[a("td",[t._v("$fetch")]),a("td",[t._v("接口api对象，根据 $fetchDefine 定义 API 路径和名称")]),a("td",[t._v("<data>[, options]")]),a("td",[t._v("data：请求的数据")]),a("td",[t._v("fetchHandler")])]),a("tr",[a("td",[t._v("$fetchConfig")]),a("td",[t._v("设置默认请求配置")]),a("td",[t._v("<options>")]),a("td",[t._v("—")]),a("td",[t._v("—")])]),a("tr",[a("td",[t._v("$fetchDefine")]),a("td",[t._v("定义API")]),a("td",[t._v("<APIMap>[, namespace]")]),a("td",[t._v("APIMap：定义API名称和配置，格式为 {name: <options>}，namespace：接口命名空间")]),a("td",[t._v("—")])]),a("tr",[a("td",[t._v("$fetchMiddleware")]),a("td",[t._v("添加请求结果拦截函数")]),a("td",[t._v("<function>")]),a("td",[t._v("—")]),a("td",[t._v("Promise")])])])]),a("h3",[t._v("options")]),a("table",[a("thead",[a("tr",[a("th",[t._v("参数")]),a("th",[t._v("说明")]),a("th",[t._v("类型")]),a("th",[t._v("可选值")]),a("th",[t._v("默认值")])])]),a("tbody",[a("tr",[a("td",[t._v("url")]),a("td",[t._v("请求URL地址")]),a("td",[t._v("String")]),a("td",[t._v("—")]),a("td",[t._v("—")])]),a("tr",[a("td",[t._v("baseUrl")]),a("td",[t._v("请求URL域名")]),a("td",[t._v("String")]),a("td",[t._v("—")]),a("td",[t._v("—")])]),a("tr",[a("td",[t._v("method")]),a("td",[t._v("请求使用的方法，如 GET、POST")]),a("td",[t._v("String")]),a("td",[t._v("—")]),a("td",[t._v("POST")])]),a("tr",[a("td",[t._v("data")]),a("td",[t._v("请求的数据")]),a("td",[t._v("Object")]),a("td",[t._v("Object / Blob / BufferSource / FormData / URLSearchParams / USVString")]),a("td",[t._v("—")])]),a("tr",[a("td",[t._v("headers")]),a("td",[t._v("请求的头信息")]),a("td",[t._v("Object")]),a("td",[t._v("—")]),a("td",[t._v("—")])]),a("tr",[a("td",[t._v("type")]),a("td",[t._v("请求的数据类型")]),a("td",[t._v("String")]),a("td",[t._v("json / blob / arrayBuffer / formData / text")]),a("td",[t._v("json")])]),a("tr",[a("td",[t._v("mode")]),a("td",[t._v("请求的模式")]),a("td",[t._v("String")]),a("td",[t._v("cors / no-cors / same-origin")]),a("td",[t._v("—")])]),a("tr",[a("td",[t._v("credentials")]),a("td",[t._v("请求的 credentials 。为了在当前域名内自动发送 cookie ， 必须提供这个选项")]),a("td",[t._v("String")]),a("td",[t._v("omit / same-origin / include")]),a("td",[t._v("—")])]),a("tr",[a("td",[t._v("cache")]),a("td",[t._v("请求的 cache 模式")]),a("td",[t._v("String")]),a("td",[t._v("default / no-store / reload / no-cache / force-cache / only-if-cached")]),a("td",[t._v("no-cache")])]),a("tr",[a("td",[t._v("signal")]),a("td",[t._v("AbortSignal 接口表示一个信号对象（ signal object ），它允许您通过 AbortController 对象与DOM请求（如Fetch）进行通信并在需要时将其中止。")]),a("td",[t._v("AbortController")]),a("td",[t._v("—")]),a("td",[t._v("—")])]),a("tr",[a("td",[t._v("redirect")]),a("td",[t._v("根据请求地址转成get请求，直接重定向URL")]),a("td",[t._v("Boolean")]),a("td",[t._v("—")]),a("td",[t._v("false")])]),a("tr",[a("td",[t._v("onDownload")]),a("td",[t._v("onDownload 回调方法")]),a("td",[t._v("Function")]),a("td",[t._v("—")]),a("td",[t._v("—")])])])]),a("h3",[t._v("fetchHandler")]),a("table",[a("thead",[a("tr",[a("th",[t._v("方法")]),a("th",[t._v("说明")]),a("th",[t._v("参数")]),a("th",[t._v("返回值")])])]),a("tbody",[a("tr",[a("td",[t._v("url")]),a("td",[t._v("url拼接")]),a("td",[t._v("<string>[, string]...")]),a("td",[t._v("fetchHandler")])]),a("tr",[a("td",[t._v("headers")]),a("td",[t._v("自定义请求头，会跟默认头信息合并")]),a("td",[t._v("<object>")]),a("td",[t._v("fetchHandler")])]),a("tr",[a("td",[t._v("get")]),a("td",[t._v("强制发起get请求（忽略接口定义和默认设置）")]),a("td",[t._v("<data>[, options]")]),a("td",[t._v("Promise对象")])]),a("tr",[a("td",[t._v("post")]),a("td",[t._v("强制发起post请求（忽略接口定义和默认设置）")]),a("td",[t._v("<data>[, options]")]),a("td",[t._v("Promise对象")])])])])])}],_=a("2877"),d={},s=Object(_["a"])(d,n,o,!1,null,null,null);e["default"]=s.exports}}]);